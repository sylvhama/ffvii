---
import clsx from "clsx";
import { getRelativeLocaleUrl } from "astro:i18n";
import { useTranslations } from "@i18n/utils";
import Anchor from "./Anchor.astro";
import { undefined } from "astro:schema";

const pages = ["games", "movies", "books", "music", "events", "merch"] as const;

type Page = (typeof pages)[number];

interface Props {
  currentPage: Page;
}

const { currentPage } = Astro.props;
const translate = useTranslations(Astro.currentLocale);
---

<nav aria-label={translate("categories")}>
  <ul class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-2">
    {
      pages.map((page) => {
        const isCurrent = currentPage === page;
        return (
          <li class="text-center">
            <Anchor
              href={
                isCurrent
                  ? ""
                  : getRelativeLocaleUrl(
                      Astro.currentLocale || "en",
                      page === "games" ? "" : page
                    )
              }
              classname={clsx(
                `relative before:absolute before:scale-50 before:left-[-36px] hover:before:content-cursor focus-visible:before:content-cursor`,
                "text-xl uppercase font-mono outline-none",
                isCurrent ? "font-bold" : ""
              )}
              aria-current={isCurrent ? "page" : undefined}
            >
              {translate(page)}
            </Anchor>
          </li>
        );
      })
    }
  </ul>
</nav>
